import csv

# Define the filename (same as Exercise 3)
filename = 'countries.csv'

print(f"\n--- Reading {filename} Contents ---")

try:
    # Open the file for reading ('r' mode)
    with open(filename, 'r', encoding='utf-8', newline='') as f:
        # Create a DictReader object
        # It automatically uses the first row of the file as fieldnames (keys)
        reader = csv.DictReader(f)

        # Print the headers that DictReader found
        print(f"File Headers (Keys): {', '.join(reader.fieldnames)}")
        print("-" * 50)

        # Iterate through the rows and print the data
        record_count = 0
        
        # Each 'row' is an OrderedDict/dictionary
        for row in reader:
            # We can access the values using the header names as keys
            name = row['name']
            area = row['area']
            code2 = row['country_code2']
            code3 = row['country_code3']
            
            print(f"Country: {name:<20} | Area: {area:>10} sq km | Codes: {code2}/{code3}")
            record_count += 1

        print("-" * 50)
        print(f"Total country records found (excluding header): {record_count}")

except FileNotFoundError:
    print(f"Error: The file '{filename}' was not found.")
    print("Please run Programming Exercise 3 first to create the file.")
except Exception as e:
    print(f"An error occurred while reading the file: {e}")

print("--- End of Country CSV Read ---")